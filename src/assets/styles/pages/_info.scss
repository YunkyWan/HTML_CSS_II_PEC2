@use "sass:color";
@use "../variables" as *;

@layer pages {
  .p-info {
    padding-block: clamp(2rem, 5vw, 3rem);

    &__header {
      margin-bottom: clamp(1.5rem, 4vw, 2.5rem);
    }

    &__title {
      margin: 0 0 .75rem;
      font-size: clamp(2.1rem, 4vw, 2.6rem);
      color: $ipsi-corporate;
    }

    &__lede {
      max-width: 40ch;
      margin: 0 0 .75rem;
      color: rgba(0, 0, 0, .8);
    }

    &__alert {
      max-width: 40rem;
    }
  }

  .p-info__intro {
    margin-bottom: clamp(2rem, 6vw, 3rem);
  }

  .p-info__dates {
    margin: 0 0 .5rem;
    font-weight: 500;
  }

  .p-info__note {
    margin: 0;
    font-size: .95rem;
    color: rgba(0, 0, 0, .7);
  }

  /* Features a la derecha */
  .c-feature {
    text-align: left;

    &-icon {
      width: 3.2rem;
      height: 3.2rem;
      margin-bottom: .75rem;
      color: #fff;
      background: linear-gradient(
        135deg,
        color.adjust($ipsi-focus, $lightness: 6%),
        color.adjust($ipsi-focus, $lightness: -4%)
      );
      border-radius: 1rem;
      box-shadow: 0 8px 18px rgba(0, 0, 0, .12);

      i {
        font-size: 1.5rem;
      }
    }

    &__title {
      margin: 0 0 .4rem;
      font-size: 1.05rem;
      color: $ipsi-corporate;
    }

    &__text {
      margin: 0;
      font-size: .95rem;
      color: rgba(0, 0, 0, .75);
    }
  }

  /* Layout general del artículo */
  .c-article {
    padding: clamp(1.25rem, 4vw, 1.75rem);
    container-name: article-info;
    container-type: inline-size;
    background: #fff;
    border-radius: 1rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, .06);
  }

  .c-article__layout {
    display: grid;
    gap: clamp(1.5rem, 4vw, 2rem);
  }

  .c-article__body {
    display: grid;
    gap: 1rem;
  }

  .c-article__subtitle {
    margin-top: 1.5rem;
    margin-bottom: .5rem;
    font-size: clamp(1.2rem, 2.4vw, 1.4rem);
  }

  .c-article__list {
    padding-left: 1.25rem;
    margin: 0 0 1rem;
  }

  .c-article__figure {
    margin: 0;
    overflow: hidden;
    background: #f5f5f5;
    border-radius: .85rem;

    &--right {
      justify-self: end;
      max-width: min(360px, 100%);
    }
  }

  .c-article__img {
    display: block;
    width: 100%;
    object-fit: cover;
  }

  .c-article__figcaption {
    padding: .5rem .75rem;
    font-size: .85rem;
    color: rgba(0, 0, 0, .7);
  }

  .c-article__quote {
    padding: .75rem 1rem;
    margin: 1rem 0;
    font-style: italic;
    background: rgba(0, 0, 0, .02);
    border-inline-start: 3px solid $ipsi-focus;
  }

  .c-article__aside {
    /* por defecto debajo en mobile */
  }

  /* Container queries: cuando el artículo es ancho, pasamos a 2 columnas */
  @container article-info (min-width: 720px) {
    .c-article__layout {
      grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);
      align-items: flex-start;
    }

    .c-article__aside {
      position: sticky;
      top: 1rem;
    }

    .c-article__figure--right {
      margin-top: .5rem;
    }
  }

  /* :is() para agrupar títulos dentro del artículo con el mismo estilo */
  .c-article :is(h2, h3, h4) {
    scroll-margin-top: 6rem;
  }

  /* :has() con criterio:
     Si el cuerpo del artículo contiene un blockquote,
     reforzamos el borde general para destacarlo. */
  .c-article__body:has(.c-article__quote) {
    padding-inline-start: .75rem;
    border-inline-start: 4px solid color.adjust($ipsi-focus, $lightness: 8%);
  }

  /* :where() para suavizar la especificidad de listas y párrafos secundarios */
  .c-article :where(ul, ol) {
    color: rgba(0, 0, 0, .85);
  }
}
